(function(t){function e(e){for(var o,a,s=e[0],u=e[1],c=e[2],l=0,d=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);h&&h(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var u=n[a];0!==r[u]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function a(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-18e3ca54":"6a212e63","chunk-2d0f0fc4":"0fe2f08d"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=o);var i,u=document.createElement("script");u.charset="utf-8",u.timeout=120,s.nc&&u.setAttribute("nonce",s.nc),u.src=a(t);var c=new Error;i=function(e){u.onerror=u.onload=null,clearTimeout(l);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}r[t]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:u})}),12e4);u.onerror=u.onload=i,document.head.appendChild(u)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var h=c;i.push([1,"chunk-vendors"]),n()})({0:function(t,e){},"08d2":function(t,e,n){t.exports=n.p+"img/butterfly.362a3d92.svg"},"0f47":function(t,e,n){"use strict";var o=n("83ea"),r=n.n(o);r.a},1:function(t,e,n){t.exports=n("cd49")},10:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},6:function(t,e){},7:function(t,e){},8:function(t,e){},"83ea":function(t,e,n){},9:function(t,e){},cd49:function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"paper",(function(){return C})),n.d(o,"waitForPaper",(function(){return O})),n.d(o,"setPaper",(function(){return A})),n.d(o,"show",(function(){return H})),n.d(o,"showPathCut",(function(){return V})),n.d(o,"showCut",(function(){return E})),n.d(o,"approxShape",(function(){return B})),n.d(o,"bufferPoints",(function(){return I})),n.d(o,"bufferPath",(function(){return T})),n.d(o,"isArgTrue",(function(){return z})),n.d(o,"isArgFalse",(function(){return D})),n.d(o,"fixPoint",(function(){return _})),n.d(o,"getRelativePoint",(function(){return M})),n.d(o,"generatePointsInPath",(function(){return R})),n.d(o,"fixSVG",(function(){return $})),n.d(o,"roundCorners",(function(){return G}));n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:""}},[n("v-toolbar-title",{staticClass:"headline text-uppercase"},[n("span",[t._v("Plottrbottr")]),n("span",{staticClass:"font-weight-light"},[t._v("Lace Maker 2")])]),n("v-spacer"),n("v-btn",{attrs:{text:"",href:"https://github.com/vuetifyjs/vuetify/releases/latest",target:"_blank"}})],1),n("v-content",[n("HelloWorld")],1)],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-col",{attrs:{cols:"12"}},[n("v-row",[n("file-upload",{ref:"upload",attrs:{extensions:"svg",accept:"image/svg+xml",multiple:!1},on:{input:t.fileUploaded},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[t.$refs.upload&&t.$refs.upload.active?t._e():n("v-btn",{on:{click:function(e){e.preventDefault(),t.$refs.upload.active=!0}}},[t._v("Upload SVG")])],1),n("v-btn",{on:{click:function(e){return e.preventDefault(),t.loadButterfly(e)}}},[t._v("Load a butterfly! (demo)")])],1),n("v-row",[n("canvas",{attrs:{id:"myCanvas"}})]),n("v-row",[t.laceMaker?n("v-btn",{on:{click:function(e){return e.preventDefault(),t.downloadSVG(e)}}},[t._v("Download SVG")]):t._e()],1)],1)],1)},u=[],c=(n("7f7f"),n("28a5"),n("96cf"),n("3b8d")),l=n("d225"),h=n("b0b4"),d=n("308d"),f=n("6bb5"),p=n("4e2b"),b=n("9ab4"),g=n("60a3"),v=n("8019"),m=n.n(v),w=(n("2222"),n("2d955")),y=n("f6f6"),P=n("eb7f"),x=n("8060"),S=n("909d");const k=!1,j=!1;let C=null;async function O(){return C||(C=x.isBrowser?await n.e("chunk-18e3ca54").then(n.t.bind(null,"63dd",1)):await Promise.all([n.e("chunk-18e3ca54"),n.e("chunk-2d0f0fc4")]).then(n.t.bind(null,"9f67",1)),C=C.default,C)}function A(t){C=t}function H(t,e){if(k){let n=[t];y.isArray(t)&&(n=t),n.forEach(t=>{C.project.activeLayer.addChild(t),t.style={strokeWidth:1,strokeColor:e||"green"}})}}function V(t,e){C.project.activeLayer.addChild(t),t.style={strokeWidth:j?"0.001pt":"1px",strokeColor:e||"red",fill:"none"}}function E(t,e){y.isArray(t)?t.forEach(t=>V(t,e)):V(t)}function B(t,e=200){let n=[],o=t;t instanceof C.CompoundPath&&(o=t.children[0]);for(let r=0;r<e;r++)n.push(o.getPointAt(r/e*o.length));return n.map(t=>o.localToGlobal(t))}function I(t,e){const n=1e3,o=1/n*10,r=e.map(t=>{return{X:t.x*n+o,Y:t.y*n+o}}),i=new P.default([r]),a=i.offset(t*n,{jointType:"jtRound",endType:"etClosedPolygon",roundPrecision:50});if(!a||!a.paths||0==a.paths.length)return null;if(!a||!a.paths||0==a.paths.length)return null;const s=a.paths.map(t=>new C.Path(t.map(t=>{return new C.Point(t.X/n,t.Y/n)})));return s}function T({buffer:t,path:e,numPoints:n}){const o=B(e,n);return I(t,o)}function z(t){return null!=t&&void 0!=t&&"no"!=t&&"false"!=t}function D(t){return!z(t)}function _({point:t,shape:e}){return new C.Point(t.x+e.bounds.x,t.y+e.bounds.y/2)}function M({shape:t,pos:e}){return _({shape:t,point:t.getPointAt(e)})}function R({path:t,exclude:e,numExtraPoints:n}){console.log("making extra points",n);const o=[];while(o.length<2*n){const n=new C.Point(Math.random()*t.bounds.width+t.bounds.x,Math.random()*t.bounds.height+t.bounds.y);!t.contains(n)||e&&e.contains(n)||(o.push([n.x,n.y]),H(new C.Path.Circle(n,.02),"lightblue"))}return console.log("done with extra points"),o}function $(t){let e=null;const n=S.JSDOM,o=new n(t);e=o.window.document;const r=e.querySelectorAll('path[d=""]');console.log(`have ${r.length} empty Ds to remove`),r.forEach(t=>t.remove());const i=e.querySelector("svg");return i.outerHTML}function G(t,e){var n=t.segments.slice(0);t.removeSegments();for(var o=0,r=n.length;o<r;o++){var i=n[o].point,a=n[o+1==r?0:o+1].point,s=n[o-1<0?n.length-1:o-1].point,u=i.subtract(a),c=i.subtract(s);u.length=e,c.length=e,t.add(new C.Segment(i.subtract(c),null,c.divide(2))),t.add(new C.Segment(i.subtract(u),u.divide(2),null))}return t.closed=!0,t}const L=w.Delaunay,{showCut:W,show:U,approxShape:q,bufferPath:F,bufferPoints:J,generatePointsInPath:X,roundCorners:Y}=o;let K=null;async function N(){console.error("waiitng for paper in lace maker"),K=await O()}class Q{constructor({debug:t,holeSize:e,inchInPoints:n,rounded:o,subtract:r,subtractBuffer:i,numPoints:a,numExtraPoints:s,voronoi:u,addHole:c,butt:l,maxWidth:h,maxHeight:d,safeBorder:f,outlineSize:p}){this.debug=t,this.rounded=o,this.subtract=r,this.inchInPoints=n,this.numPoints=a,this.numExtraPoints=s,this.voronoi=u,this.addHole=c,this.butt=l,this.maxWidth=h,this.maxHeight=d,this.safeBorder=f,this.subtractBuffer=i,this.outlineSize=p,this.threadHoleSize=this.pointInches(e),this.threadHoleBuffer=this.pointInches(.04),this.threadHoleTotalSize=this.threadHoleSize+this.threadHoleBuffer,this.debug||(console.log=t=>{})}pointInches(t){return t*this.inchInPoints}inchPoints(t){return t/this.inchInPoints}loadAndResizeSvg({svgData:t,yOffset:e=0,xOffset:n=0}){var o=K.project.importSVG(t);const r=o.children[1];console.log("num children",o.children.length);let i=r;r.children&&(i=y.sortBy(r.children,t=>-t.length)[0],console.log("num children children",r.children.length));const a=this.pointInches(this.maxWidth),s=this.pointInches(this.maxHeight);console.log(`current size: ${this.inchPoints(i.bounds.width)} x ${this.inchPoints(i.bounds.height)}`);const u=Math.min(a/i.bounds.width,s/i.bounds.height);return o=o.scale(u),o.translate(new K.Point(-i.bounds.x+n,-i.bounds.y+e)),console.log(`new size: ${this.inchPoints(i.bounds.width)} x ${this.inchPoints(i.bounds.height)}`),console.log(`new size: ${this.inchPoints(o.bounds.width)} x ${this.inchPoints(o.bounds.height)}`),o.remove(),i}doAddHole({path:t,size:e,buffer:n}){if(!this.addHole)return void W(t);let o=new K.Point(0,1),r=new K.Point(t.bounds.width/2,0);this.butt&&t.bounds.width/t.bounds.height>3&&(o=new K.Point(-1,0),r=new K.Point(t.bounds.x+t.bounds.width+2*(e+n),t.bounds.y+t.bounds.height/2));let i=new K.Path.Circle(r,e+n);function a(t,e){console.log("length of path1",t.length),console.log("length of path1",t.area);const n=t.intersect(e,{insert:!1,trace:!1});return console.log("length of path1 after subtract path2",n.length),console.log("length of path1 after subtract path2",n.area),!!n&&(console.log(n.length),n.length<.5*t.length)}while(!i.intersects(t)||!a(i,t))i=i.translate(o);i.scale(1.2);for(let c=0;c<10;c++)i.translate(o);let s=t;s instanceof K.CompoundPath&&(s=s.children[0]),W(i.unite(s));const u=new K.Path.Circle(i.bounds.center,e);W(u)}buildTriangles({path:t}){const e=t;U(new K.Path(q(t)),"brown");let n=F({buffer:-this.pointInches(this.safeBorder),path:t});U(n,"brown"),n.forEach(t=>this.processInnerShape({innerShape:t,outerShape:e}))}processInnerShape({outerShape:t,innerShape:e}){let n=F({buffer:-this.pointInches(this.subtractBuffer),path:t});U(n,"brown");const o=this.numPoints,r=this.pointsToArray(q(e,o));r.forEach(t=>U(new K.Path.Circle(t,1),"blue"));const i=X({path:e,numExtraPoints:this.numExtraPoints}),a=r.concat(i);console.log("triangulating");const s=L.from(a);console.log("done");let u=Array.from(s.trianglePolygons());if(this.voronoi){const e=s.voronoi([t.bounds.x,t.bounds.y,t.bounds.x+t.bounds.width,t.bounds.y+t.bounds.height]);u=Array.from(e.cellPolygons())}console.log(`have ${u.length} triangles`),u.forEach((t,o)=>{const r=t.map(t=>new K.Point(t[0],t[1]));let i=J(-this.pointInches(this.outlineSize),r);if(i){i=i[0],i.closePath(),this.rounded&&(i=Y(i,2)),i.closePath();let t=i.intersect(e);this.subtract&&n&&n.forEach(e=>t=t.subtract(e)),W(t)}else console.log(`could not shrink :-( triagnel ${o}`)})}pointsToArray(t){const e=[];return t.forEach(t=>{e.push([t.x,t.y])}),e}async loadAndProcessSvgData({svgData:t,paperModule:e}){e&&(K=e,A(K)),K||(await N(),K.setup([10,10])),K.settings.insertItems=!1;let n=this.loadAndResizeSvg({svgData:t,xOffset:2*this.threadHoleTotalSize,yOffset:2*this.threadHoleTotalSize});n.closed||(console.log("not closed outer ring"),process.exit(1)),this.buildTriangles({path:n}),this.doAddHole({path:n,size:this.threadHoleSize,buffer:this.threadHoleBuffer})}exportSVGString(){return K.project.exportSVG({asString:!0,bounds:"content"})}}var Z=n("08d2");g["b"].component("file-upload",m.a);var tt=function(t){function e(){var t;return Object(l["a"])(this,e),t=Object(d["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.files=[],t.laceMaker=null,t.filePrefix="",t}return Object(p["a"])(e,t),Object(h["a"])(e,[{key:"mounted",value:function(){var t=document.getElementById("myCanvas");paper.setup(t)}},{key:"loadButterfly",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:fetch(Z).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.blob();case 2:return o=t.sent,e.filePrefix="butterfly",t.next=6,o.text();case 6:r=t.sent,e.processSVGData(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"fileUploaded",value:function(t){var e=new FileReader,n=this;e.onload=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=atob(e.target.result.substring(26)),t.next=3,n.processSVGData(o);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.filePrefix=t[0].file.name.split(".")[0],e.readAsDataURL(t[0].file)}},{key:"processSVGData",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.laceMaker=new Q({debug:!1,inchInPoints:72,maxWidth:3,maxHeight:3,voronoi:!0,subtract:!1,numPoints:50,numExtraPoints:10,subtractBuffer:.2,outlineSize:.03,safeBorder:.1,rounded:!1,holeSize:0,addHole:!1,butt:!1}),paper.project.clear(),this.laceMaker.loadAndProcessSvgData({svgData:e,paperModule:paper}),paper.project.activeLayer.style.fillColor=null,paper.project.activeLayer.style.strokeWidth=.5,paper.project.activeLayer.fitBounds(paper.view.bounds);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"downloadSVG",value:function(){var t=this.laceMaker.exportSVGString(),e=$(t),n=encodeURIComponent(e),o="data:image/svg+xml,",r=o+n,i=document.createElement("a");i.href=r;var a=this.filePrefix+(new Date).getTime()+".svg";return i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),!1}}]),e}(g["b"]);tt=Object(b["a"])([g["a"]],tt);var et=tt,nt=et,ot=(n("0f47"),n("2877")),rt=n("6544"),it=n.n(rt),at=n("8336"),st=n("62ad"),ut=n("a523"),ct=n("0fd9"),lt=Object(ot["a"])(nt,s,u,!1,null,"325b7246",null),ht=lt.exports;it()(lt,{VBtn:at["a"],VCol:st["a"],VContainer:ut["a"],VRow:ct["a"]});var dt=r["a"].extend({name:"App",components:{HelloWorld:ht},data:function(){return{}}}),ft=dt,pt=n("7496"),bt=n("40dc"),gt=n("a75b"),vt=n("2fa4"),mt=n("2a7f"),wt=Object(ot["a"])(ft,i,a,!1,null,null,null),yt=wt.exports;it()(wt,{VApp:pt["a"],VAppBar:bt["a"],VBtn:at["a"],VContent:gt["a"],VSpacer:vt["a"],VToolbarTitle:mt["a"]});var Pt=n("f309");r["a"].use(Pt["a"]);var xt=new Pt["a"]({icons:{iconfont:"mdi"}});r["a"].config.productionTip=!1,new r["a"]({vuetify:xt,render:function(t){return t(yt)}}).$mount("#app")}});
//# sourceMappingURL=app.a3c61274.js.map